"use strict";(self.webpackChunkapp_saas=self.webpackChunkapp_saas||[]).push([[971],{1971:(te,u,d)=>{d.r(u),d.d(u,{SmartChatModule:()=>ne});var a=d(177),m=d(1626),i=d(4341),g=d(4369),e=d(540),_=d(5312);let l=(()=>{class t{constructor(n){this.http=n,this.apiUrl=_.c.API_URL||"http://localhost:3500",this.tenantId=1}get headers(){return new m.Lr({"Content-Type":"application/json","X-Tenant-Id":this.tenantId.toString()})}getConfig(){return this.http.get(`${this.apiUrl}/chat/tenant/config`,{headers:this.headers})}updateConfig(n){return this.http.put(`${this.apiUrl}/chat/tenant/config`,n,{headers:this.headers})}getStats(){return this.http.get(`${this.apiUrl}/chat/tenant/stats`,{headers:this.headers})}getConversations(n){let s=`${this.apiUrl}/chat/tenant/conversations`;const o=[];return n?.status&&o.push(`status=${n.status}`),n?.limit&&o.push(`limit=${n.limit}`),o.length>0&&(s+="?"+o.join("&")),this.http.get(s,{headers:this.headers})}getConversationMessages(n){return this.http.get(`${this.apiUrl}/chat/tenant/conversations/${n}/messages`,{headers:this.headers})}sendMessage(n,s){return this.http.post(`${this.apiUrl}/chat/tenant/messages/send`,{conversation_id:n,message:s,sender_type:"agent"},{headers:this.headers})}getAgents(){return this.http.get(`${this.apiUrl}/chat/tenant/agents`,{headers:this.headers})}inviteAgent(n){return this.http.post(`${this.apiUrl}/chat/tenant/agents`,n,{headers:this.headers})}setTenantId(n){this.tenantId=n}generateEmbedCode(n){return`\x3c!-- Smart Chat Widget --\x3e\n<script>\n  (function() {\n    var script = document.createElement('script');\n    script.src = '${this.apiUrl}/widget/chat-widget.js';\n    script.setAttribute('data-tenant-id', '${n}');\n    script.async = true;\n    document.head.appendChild(script);\n  })();\n<\/script>`}static{this.\u0275fac=function(s){return new(s||t)(e.KVO(m.Qq))}}static{this.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function f(t,r){if(1&t&&(e.j41(0,"div",13),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(1),e.SpI(" \u274c ",n.error," ")}}function b(t,r){if(1&t&&(e.j41(0,"div",14)(1,"h2",15),e.EFF(2,"\u{1f3a8} Personaliza tu Widget"),e.k0s(),e.j41(3,"p",16),e.EFF(4,"Configura la apariencia y mensajes del chat"),e.k0s(),e.j41(5,"form",17)(6,"div",18)(7,"label",19),e.EFF(8,"Color Principal"),e.k0s(),e.j41(9,"div",20),e.nrm(10,"input",21),e.j41(11,"span",22),e.EFF(12),e.k0s()()(),e.j41(13,"div",18)(14,"label"),e.EFF(15,"Posici\xf3n en Pantalla"),e.k0s(),e.j41(16,"div",23)(17,"label",24),e.nrm(18,"input",25),e.j41(19,"span"),e.EFF(20,"Abajo Derecha"),e.k0s()(),e.j41(21,"label",24),e.nrm(22,"input",26),e.j41(23,"span"),e.EFF(24,"Abajo Izquierda"),e.k0s()()()(),e.j41(25,"div",18)(26,"label",27),e.EFF(27,"Mensaje de Bienvenida"),e.k0s(),e.nrm(28,"textarea",28),e.j41(29,"small",29),e.EFF(30),e.k0s()(),e.j41(31,"div",30)(32,"label",31),e.nrm(33,"input",32),e.j41(34,"span"),e.EFF(35,"Activar respuestas autom\xe1ticas fuera de horario"),e.k0s()()(),e.j41(36,"div",30)(37,"label",31),e.nrm(38,"input",33),e.j41(39,"span"),e.EFF(40,"Solicitar email cuando estamos offline"),e.k0s()()()()()),2&t){const n=e.XpG();let s,o;e.R7$(5),e.Y8G("formGroup",n.step1Form),e.R7$(7),e.JRh(null==(s=n.step1Form.get("widget_color"))?null:s.value),e.R7$(18),e.SpI(" ",(null==(o=n.step1Form.get("welcome_message"))||null==o.value?null:o.value.length)||0," / 250 ")}}function C(t,r){if(1&t&&(e.j41(0,"div",46),e.nrm(1,"input",47),e.j41(2,"span",48),e.EFF(3,"hasta"),e.k0s(),e.nrm(4,"input",47),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(1),e.Y8G("formControlName",n+"_open"),e.R7$(3),e.Y8G("formControlName",n+"_close")}}function h(t,r){if(1&t&&(e.j41(0,"div",42)(1,"label",43),e.nrm(2,"input",44),e.j41(3,"span"),e.EFF(4),e.k0s()(),e.DNE(5,C,5,2,"div",45),e.k0s()),2&t){const n=r.$implicit,s=e.XpG(2);let o;e.R7$(2),e.Y8G("formControlName",n+"_enabled"),e.R7$(2),e.JRh(s.getDayLabel(n)),e.R7$(1),e.Y8G("ngIf",null==(o=s.step2Form.get(n+"_enabled"))?null:o.value)}}const v=function(){return["monday","tuesday","wednesday","thursday","friday","saturday","sunday"]};function M(t,r){if(1&t&&(e.j41(0,"div",14)(1,"h2",15),e.EFF(2,"\u{1f550} Horarios de Atenci\xf3n"),e.k0s(),e.j41(3,"p",16),e.EFF(4,"Define cu\xe1ndo tu equipo est\xe1 disponible"),e.k0s(),e.j41(5,"form",17)(6,"div",18)(7,"label",34),e.EFF(8,"Zona Horaria"),e.k0s(),e.j41(9,"select",35)(10,"option",36),e.EFF(11,"Europa/Madrid (GMT+1)"),e.k0s(),e.j41(12,"option",37),e.EFF(13,"Am\xe9rica/Nueva York (GMT-5)"),e.k0s(),e.j41(14,"option",38),e.EFF(15,"Am\xe9rica/Ciudad de M\xe9xico (GMT-6)"),e.k0s(),e.j41(16,"option",39),e.EFF(17,"Am\xe9rica/Los \xc1ngeles (GMT-8)"),e.k0s()()(),e.j41(18,"div",40),e.DNE(19,h,6,3,"div",41),e.k0s()()()),2&t){const n=e.XpG();e.R7$(5),e.Y8G("formGroup",n.step2Form),e.R7$(14),e.Y8G("ngForOf",e.lJ4(2,v))}}function P(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",14)(1,"h2",15),e.EFF(2,"\u{1f680} \xa1Listo para Instalar!"),e.k0s(),e.j41(3,"p",16),e.EFF(4,"Copia el c\xf3digo e inst\xe1lalo en tu sitio web"),e.k0s(),e.j41(5,"div",49)(6,"h3"),e.EFF(7,"Vista Previa"),e.k0s(),e.j41(8,"div",50)(9,"div",51),e.EFF(10,"\u{1f4ac}"),e.k0s()(),e.j41(11,"p",52),e.EFF(12),e.k0s()(),e.j41(13,"div",53)(14,"h3"),e.EFF(15,"C\xf3digo de Instalaci\xf3n"),e.k0s(),e.j41(16,"div",54)(17,"pre")(18,"code"),e.EFF(19),e.k0s()(),e.j41(20,"button",55),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.copyToClipboard())}),e.EFF(21," \u{1f4cb} Copiar C\xf3digo "),e.k0s()(),e.j41(22,"p",56),e.EFF(23," Pega este c\xf3digo antes del cierre de la etiqueta "),e.j41(24,"code"),e.EFF(25,"</body>"),e.k0s(),e.EFF(26," en tu sitio web. "),e.k0s()(),e.j41(27,"div",57)(28,"h3"),e.EFF(29,"Link de Prueba"),e.k0s(),e.j41(30,"a",58),e.EFF(31),e.k0s()()()}if(2&t){const n=e.XpG();e.R7$(8),e.xc7("background-color",n.config.widget_color),e.R7$(4),e.JRh(n.config.welcome_message),e.R7$(7),e.JRh(n.embedCode),e.R7$(11),e.Y8G("href",n.previewUrl,e.B4B),e.R7$(1),e.SpI(" ",n.previewUrl," ")}}function O(t,r){if(1&t){const n=e.RV6();e.j41(0,"button",59),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.prevStep())}),e.EFF(1," \u2190 Atr\xe1s "),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("disabled",1===n.currentStep||n.loading)}}function w(t,r){if(1&t){const n=e.RV6();e.j41(0,"button",60),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.nextStep())}),e.EFF(1," Siguiente \u2192 "),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("disabled",1===n.currentStep&&n.step1Form.invalid||2===n.currentStep&&n.step2Form.invalid||n.loading)}}function F(t,r){1&t&&(e.j41(0,"span"),e.EFF(1,"\u2713 Guardar y Finalizar"),e.k0s())}function x(t,r){1&t&&(e.j41(0,"span"),e.EFF(1,"Guardando..."),e.k0s())}function y(t,r){if(1&t){const n=e.RV6();e.j41(0,"button",61),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.saveAndFinish())}),e.DNE(1,F,2,0,"span",62),e.DNE(2,x,2,0,"span",62),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("disabled",n.loading),e.R7$(1),e.Y8G("ngIf",!n.loading),e.R7$(1),e.Y8G("ngIf",n.loading)}}function E(t,r){1&t&&(e.j41(0,"div",8),e.nrm(1,"div",9),e.j41(2,"p"),e.EFF(3,"Cargando datos..."),e.k0s()())}function j(t,r){if(1&t&&(e.j41(0,"div",10),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(1),e.SpI(" \u274c ",n.error," ")}}function z(t,r){if(1&t&&(e.j41(0,"div",18)(1,"div",19)(2,"div",20),e.EFF(3,"\u{1f4ac}"),e.k0s(),e.j41(4,"div",21)(5,"h3",22),e.EFF(6),e.k0s(),e.j41(7,"p",23),e.EFF(8,"Total Conversaciones"),e.k0s()()(),e.j41(9,"div",19)(10,"div",20),e.EFF(11,"\u2705"),e.k0s(),e.j41(12,"div",21)(13,"h3",22),e.EFF(14),e.k0s(),e.j41(15,"p",23),e.EFF(16,"Conversaciones Activas"),e.k0s()()(),e.j41(17,"div",19)(18,"div",20),e.EFF(19,"\u{1f4e8}"),e.k0s(),e.j41(20,"div",21)(21,"h3",22),e.EFF(22),e.k0s(),e.j41(23,"p",23),e.EFF(24,"Total Mensajes"),e.k0s()()(),e.j41(25,"div",19)(26,"div",20),e.EFF(27,"\u23f1\ufe0f"),e.k0s(),e.j41(28,"div",21)(29,"h3",22),e.EFF(30),e.k0s(),e.j41(31,"p",23),e.EFF(32,"Tiempo Promedio Respuesta"),e.k0s()()()()),2&t){const n=e.XpG(2);e.R7$(6),e.JRh(n.stats.total_conversations),e.R7$(8),e.JRh(n.stats.active_conversations),e.R7$(8),e.JRh(n.stats.total_messages),e.R7$(8),e.JRh(n.stats.avg_response_time)}}function R(t,r){if(1&t&&(e.j41(0,"div",24)(1,"h2"),e.EFF(2,"Por Estado"),e.k0s(),e.j41(3,"div",25)(4,"div",26),e.nrm(5,"div",27),e.j41(6,"span",28),e.EFF(7),e.k0s()(),e.j41(8,"div",26),e.nrm(9,"div",27),e.j41(10,"span",28),e.EFF(11),e.k0s()(),e.j41(12,"div",26),e.nrm(13,"div",27),e.j41(14,"span",28),e.EFF(15),e.k0s()()()()),2&t){const n=e.XpG(2);e.R7$(5),e.muq("background: #10b981; width: ",n.stats.total_conversations>0?n.stats.conversations_by_status.open/n.stats.total_conversations*100:0,"%"),e.R7$(2),e.SpI("Abiertas: ",n.stats.conversations_by_status.open,""),e.R7$(2),e.muq("background: #f59e0b; width: ",n.stats.total_conversations>0?n.stats.conversations_by_status.pending/n.stats.total_conversations*100:0,"%"),e.R7$(2),e.SpI("Pendientes: ",n.stats.conversations_by_status.pending,""),e.R7$(2),e.muq("background: #6b7280; width: ",n.stats.total_conversations>0?n.stats.conversations_by_status.closed/n.stats.total_conversations*100:0,"%"),e.R7$(2),e.SpI("Cerradas: ",n.stats.conversations_by_status.closed,"")}}function $(t,r){1&t&&(e.j41(0,"div",29)(1,"p"),e.EFF(2,"No hay conversaciones recientes"),e.k0s()())}function D(t,r){if(1&t&&(e.j41(0,"div",32)(1,"div",33)(2,"h4"),e.EFF(3),e.k0s(),e.j41(4,"p",34),e.EFF(5),e.k0s()(),e.j41(6,"div",35)(7,"span"),e.EFF(8),e.k0s(),e.j41(9,"span",36),e.EFF(10),e.k0s()()()),2&t){const n=r.$implicit,s=e.XpG(3);e.R7$(3),e.SpI("Conversaci\xf3n #",n.id,""),e.R7$(2),e.JRh(n.last_message||"Sin mensajes"),e.R7$(2),e.HbH("badge "+s.getStatusBadgeClass(n.status)),e.R7$(1),e.SpI(" ",s.getStatusLabel(n.status)," "),e.R7$(2),e.JRh(s.formatDate(n.updated_at))}}function S(t,r){if(1&t&&(e.j41(0,"div",30),e.DNE(1,D,11,6,"div",31),e.k0s()),2&t){const n=e.XpG(2);e.R7$(1),e.Y8G("ngForOf",n.recentConversations)}}function I(t,r){if(1&t&&(e.j41(0,"div",11),e.DNE(1,z,33,4,"div",12),e.DNE(2,R,16,12,"div",13),e.j41(3,"div",14)(4,"h2"),e.EFF(5,"Conversaciones Recientes"),e.k0s(),e.DNE(6,$,3,0,"div",15),e.DNE(7,S,2,1,"div",16),e.j41(8,"a",17),e.EFF(9," Ver todas las conversaciones \u2192 "),e.k0s()()()),2&t){const n=e.XpG();e.R7$(1),e.Y8G("ngIf",n.stats),e.R7$(1),e.Y8G("ngIf",n.stats&&n.stats.conversations_by_status),e.R7$(4),e.Y8G("ngIf",0===n.recentConversations.length),e.R7$(1),e.Y8G("ngIf",n.recentConversations.length>0)}}function N(t,r){if(1&t&&(e.j41(0,"span",18),e.EFF(1),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(1),e.JRh(n.unread_count)}}function T(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",13),e.bIt("click",function(){const c=e.eBV(n).$implicit,p=e.XpG(2);return e.Njj(p.selectConversation(c))}),e.j41(1,"div",14)(2,"h4"),e.EFF(3),e.k0s(),e.j41(4,"span",15),e.EFF(5),e.k0s()(),e.j41(6,"p",16),e.EFF(7),e.k0s(),e.DNE(8,N,2,1,"span",17),e.k0s()}if(2&t){const n=r.$implicit,s=e.XpG(2);e.AVh("active",(null==s.selectedConversation?null:s.selectedConversation.id)===n.id),e.R7$(3),e.SpI("Conversaci\xf3n #",n.id,""),e.R7$(2),e.JRh(s.formatTime(n.updated_at)),e.R7$(2),e.JRh(n.last_message||"Sin mensajes"),e.R7$(1),e.Y8G("ngIf",n.unread_count>0)}}function Y(t,r){if(1&t&&(e.j41(0,"div",11),e.DNE(1,T,9,6,"div",12),e.k0s()),2&t){const n=e.XpG();e.R7$(1),e.Y8G("ngForOf",n.conversations)}}function A(t,r){1&t&&(e.j41(0,"div",19),e.nrm(1,"div",20),e.k0s())}function X(t,r){if(1&t&&(e.j41(0,"div",21)(1,"h3"),e.EFF(2),e.k0s(),e.j41(3,"span",22),e.EFF(4),e.k0s()()),2&t){const n=e.XpG();e.R7$(2),e.SpI("Conversaci\xf3n #",n.selectedConversation.id,""),e.R7$(2),e.JRh(n.selectedConversation.status)}}function V(t,r){1&t&&(e.j41(0,"div",23)(1,"p"),e.EFF(2,"Selecciona una conversaci\xf3n para ver los mensajes"),e.k0s()())}function U(t,r){if(1&t&&(e.j41(0,"div",26)(1,"div",27)(2,"p"),e.EFF(3),e.k0s(),e.j41(4,"span",28),e.EFF(5),e.k0s()()()),2&t){const n=r.$implicit,s=e.XpG(2);e.AVh("message-agent","agent"===n.sender_type)("message-user","user"===n.sender_type),e.R7$(3),e.JRh(n.message),e.R7$(2),e.JRh(s.formatTime(n.created_at))}}function J(t,r){if(1&t&&(e.j41(0,"div",24),e.DNE(1,U,6,6,"div",25),e.k0s()),2&t){const n=e.XpG();e.R7$(1),e.Y8G("ngForOf",n.messages)}}function B(t,r){if(1&t){const n=e.RV6();e.j41(0,"div",29)(1,"input",30),e.bIt("ngModelChange",function(o){e.eBV(n);const c=e.XpG();return e.Njj(c.newMessage=o)})("keyup.enter",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.sendMessage())}),e.k0s(),e.j41(2,"button",31),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.sendMessage())}),e.EFF(3),e.k0s()()}if(2&t){const n=e.XpG();e.R7$(1),e.Y8G("ngModel",n.newMessage)("disabled",n.sendingMessage),e.R7$(1),e.Y8G("disabled",!n.newMessage.trim()||n.sendingMessage),e.R7$(1),e.SpI(" ",n.sendingMessage?"...":"\u{1f4e4}"," ")}}function W(t,r){if(1&t&&(e.j41(0,"div",31),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(1),e.JRh(n.success)}}function q(t,r){if(1&t&&(e.j41(0,"div",32),e.EFF(1),e.k0s()),2&t){const n=e.XpG();e.R7$(1),e.JRh(n.error)}}function H(t,r){if(1&t&&(e.j41(0,"div",35)(1,"div",36)(2,"h4"),e.EFF(3),e.k0s(),e.j41(4,"p"),e.EFF(5),e.k0s()(),e.j41(6,"span",37),e.EFF(7),e.k0s()()),2&t){const n=r.$implicit,s=e.XpG(2);e.R7$(3),e.JRh(n.agent_name),e.R7$(2),e.JRh(n.agent_email),e.R7$(2),e.JRh(s.getStatusLabel(n.status))}}function Z(t,r){if(1&t&&(e.j41(0,"div",33),e.DNE(1,H,8,3,"div",34),e.k0s()),2&t){const n=e.XpG();e.R7$(1),e.Y8G("ngForOf",n.agents)}}function K(t,r){1&t&&(e.j41(0,"div",38)(1,"p"),e.EFF(2,"No hay agentes registrados"),e.k0s()())}const Q=[{path:"",redirectTo:"wizard",pathMatch:"full"},{path:"wizard",component:(()=>{class t{constructor(n,s,o){this.fb=n,this.chatService=s,this.router=o,this.currentStep=1,this.totalSteps=3,this.loading=!1,this.error=null,this.config={widget_color:"#4F46E5",widget_position:"bottom-right",welcome_message:"\u{1f44b} \xa1Hola! \xbfEn qu\xe9 podemos ayudarte?",integration_type:"native",is_active:!0,business_hours:{monday:{open:"09:00",close:"18:00",enabled:!0},tuesday:{open:"09:00",close:"18:00",enabled:!0},wednesday:{open:"09:00",close:"18:00",enabled:!0},thursday:{open:"09:00",close:"18:00",enabled:!0},friday:{open:"09:00",close:"18:00",enabled:!0},saturday:{open:"10:00",close:"14:00",enabled:!1},sunday:{open:"10:00",close:"14:00",enabled:!1}},timezone:"Europe/Madrid",auto_response_enabled:!0,capture_leads:!0},this.embedCode="",this.previewUrl=""}ngOnInit(){this.initForms(),this.loadExistingConfig()}initForms(){this.step1Form=this.fb.group({widget_color:[this.config.widget_color,i.k0.required],widget_position:[this.config.widget_position,i.k0.required],welcome_message:[this.config.welcome_message,[i.k0.required,i.k0.maxLength(250)]],auto_response_enabled:[this.config.auto_response_enabled],capture_leads:[this.config.capture_leads]}),this.step2Form=this.fb.group({timezone:[this.config.timezone,i.k0.required],monday_enabled:[this.config.business_hours?.monday.enabled],monday_open:[this.config.business_hours?.monday.open],monday_close:[this.config.business_hours?.monday.close],tuesday_enabled:[this.config.business_hours?.tuesday.enabled],tuesday_open:[this.config.business_hours?.tuesday.open],tuesday_close:[this.config.business_hours?.tuesday.close],wednesday_enabled:[this.config.business_hours?.wednesday.enabled],wednesday_open:[this.config.business_hours?.wednesday.open],wednesday_close:[this.config.business_hours?.wednesday.close],thursday_enabled:[this.config.business_hours?.thursday.enabled],thursday_open:[this.config.business_hours?.thursday.open],thursday_close:[this.config.business_hours?.thursday.close],friday_enabled:[this.config.business_hours?.friday.enabled],friday_open:[this.config.business_hours?.friday.open],friday_close:[this.config.business_hours?.friday.close],saturday_enabled:[this.config.business_hours?.saturday.enabled],saturday_open:[this.config.business_hours?.saturday.open],saturday_close:[this.config.business_hours?.saturday.close],sunday_enabled:[this.config.business_hours?.sunday.enabled],sunday_open:[this.config.business_hours?.sunday.open],sunday_close:[this.config.business_hours?.sunday.close]})}loadExistingConfig(){this.chatService.getConfig().subscribe({next:n=>{if(n&&n.id&&(this.config=n,this.step1Form.patchValue(n),n.business_hours)){const s={timezone:n.timezone};Object.keys(n.business_hours).forEach(o=>{s[`${o}_enabled`]=n.business_hours[o].enabled,s[`${o}_open`]=n.business_hours[o].open,s[`${o}_close`]=n.business_hours[o].close}),this.step2Form.patchValue(s)}},error:n=>{console.log("No existe configuraci\xf3n previa, creando nueva...",n)}})}nextStep(){if(1===this.currentStep&&this.step1Form.valid)Object.assign(this.config,this.step1Form.value),this.currentStep++;else if(2===this.currentStep&&this.step2Form.valid){const n=this.step2Form.value;this.config.timezone=n.timezone,this.config.business_hours={monday:{open:n.monday_open,close:n.monday_close,enabled:n.monday_enabled},tuesday:{open:n.tuesday_open,close:n.tuesday_close,enabled:n.tuesday_enabled},wednesday:{open:n.wednesday_open,close:n.wednesday_close,enabled:n.wednesday_enabled},thursday:{open:n.thursday_open,close:n.thursday_close,enabled:n.thursday_enabled},friday:{open:n.friday_open,close:n.friday_close,enabled:n.friday_enabled},saturday:{open:n.saturday_open,close:n.saturday_close,enabled:n.saturday_enabled},sunday:{open:n.sunday_open,close:n.sunday_close,enabled:n.sunday_enabled}},this.currentStep++,this.generateEmbedCode()}}prevStep(){this.currentStep>1&&this.currentStep--}generateEmbedCode(){this.embedCode=this.chatService.generateEmbedCode(this.config.tenant_id||1),this.previewUrl=`${window.location.origin}/preview/smart-chat?tenant=${this.config.tenant_id||1}`}copyToClipboard(){navigator.clipboard.writeText(this.embedCode).then(()=>{alert("\u2705 C\xf3digo copiado al portapapeles")})}saveAndFinish(){this.loading=!0,this.error=null,this.chatService.updateConfig(this.config).subscribe({next:n=>{console.log("\u2705 Configuraci\xf3n guardada:",n),this.loading=!1;const o=window.location.pathname.includes("/preview/")?"/preview/smart-chat/dashboard":"/app/smart-chat/dashboard";this.router.navigate([o])},error:n=>{console.error("\u274c Error al guardar configuraci\xf3n:",n),this.error="Error al guardar la configuraci\xf3n. Intenta de nuevo.",this.loading=!1}})}getProgressPercentage(){return this.currentStep/this.totalSteps*100}getDayLabel(n){return{monday:"Lunes",tuesday:"Martes",wednesday:"Mi\xe9rcoles",thursday:"Jueves",friday:"Viernes",saturday:"S\xe1bado",sunday:"Domingo"}[n]||n}static{this.\u0275fac=function(s){return new(s||t)(e.rXU(i.ok),e.rXU(l),e.rXU(g.Ix))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-wizard"]],decls:17,vars:11,consts:[[1,"wizard-container"],[1,"progress-bar"],[1,"progress-fill"],[1,"wizard-content"],[1,"wizard-header"],[1,"wizard-title"],[1,"wizard-subtitle"],["class","error-message",4,"ngIf"],["class","wizard-step",4,"ngIf"],[1,"wizard-navigation"],["class","btn btn-secondary",3,"disabled","click",4,"ngIf"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],["class","btn btn-success",3,"disabled","click",4,"ngIf"],[1,"error-message"],[1,"wizard-step"],[1,"step-title"],[1,"step-description"],[1,"wizard-form",3,"formGroup"],[1,"form-group"],["for","widget_color"],[1,"color-picker-wrapper"],["type","color","id","widget_color","formControlName","widget_color",1,"color-input"],[1,"color-value"],[1,"radio-group"],[1,"radio-label"],["type","radio","formControlName","widget_position","value","bottom-right"],["type","radio","formControlName","widget_position","value","bottom-left"],["for","welcome_message"],["id","welcome_message","formControlName","welcome_message","rows","3","maxlength","250","placeholder","\u{1f44b} \xa1Hola! \xbfEn qu\xe9 podemos ayudarte?",1,"textarea-input"],[1,"char-count"],[1,"form-group","checkbox-group"],[1,"checkbox-label"],["type","checkbox","formControlName","auto_response_enabled"],["type","checkbox","formControlName","capture_leads"],["for","timezone"],["id","timezone","formControlName","timezone",1,"select-input"],["value","Europe/Madrid"],["value","America/New_York"],["value","America/Mexico_City"],["value","America/Los_Angeles"],[1,"business-hours"],["class","day-row",4,"ngFor","ngForOf"],[1,"day-row"],[1,"checkbox-label","day-name"],["type","checkbox",3,"formControlName"],["class","time-inputs",4,"ngIf"],[1,"time-inputs"],["type","time",1,"time-input",3,"formControlName"],[1,"time-separator"],[1,"preview-section"],[1,"preview-widget"],[1,"preview-bubble"],[1,"preview-message"],[1,"embed-section"],[1,"code-block"],[1,"copy-button",3,"click"],[1,"code-instructions"],[1,"preview-link-section"],["target","_blank",1,"preview-link",3,"href"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-success",3,"disabled","click"],[4,"ngIf"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1),e.nrm(2,"div",2),e.k0s(),e.j41(3,"div",3)(4,"div",4)(5,"h1",5),e.EFF(6,"Configuraci\xf3n de Smart Chat"),e.k0s(),e.j41(7,"p",6),e.EFF(8),e.k0s()(),e.DNE(9,f,2,1,"div",7),e.DNE(10,b,41,3,"div",8),e.DNE(11,M,20,3,"div",8),e.DNE(12,P,32,6,"div",8),e.j41(13,"div",9),e.DNE(14,O,2,1,"button",10),e.DNE(15,w,2,1,"button",11),e.DNE(16,y,3,3,"button",12),e.k0s()()()),2&s&&(e.R7$(2),e.xc7("width",o.getProgressPercentage(),"%"),e.R7$(6),e.Lme("Paso ",o.currentStep," de ",o.totalSteps,""),e.R7$(1),e.Y8G("ngIf",o.error),e.R7$(1),e.Y8G("ngIf",1===o.currentStep),e.R7$(1),e.Y8G("ngIf",2===o.currentStep),e.R7$(1),e.Y8G("ngIf",3===o.currentStep),e.R7$(2),e.Y8G("ngIf",o.currentStep<o.totalSteps),e.R7$(1),e.Y8G("ngIf",o.currentStep<o.totalSteps),e.R7$(1),e.Y8G("ngIf",o.currentStep===o.totalSteps))},dependencies:[a.Sq,a.bT,i.qT,i.xH,i.y7,i.me,i.Zm,i.wz,i.Fm,i.BC,i.cb,i.tU,i.j4,i.JD],styles:[".wizard-container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:0 1rem}.progress-bar[_ngcontent-%COMP%]{height:4px;background:#e5e7eb;border-radius:2px;overflow:hidden;margin-bottom:2rem}.progress-bar[_ngcontent-%COMP%]   .progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#4F46E5,#7C3AED);transition:width .3s ease}.wizard-content[_ngcontent-%COMP%]{background:white;border-radius:12px;box-shadow:0 4px 6px -1px #0000001a;padding:2rem}.wizard-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.wizard-header[_ngcontent-%COMP%]   .wizard-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1f2937;margin:0 0 .5rem}.wizard-header[_ngcontent-%COMP%]   .wizard-subtitle[_ngcontent-%COMP%]{color:#6b7280;font-size:1rem}.error-message[_ngcontent-%COMP%]{background:#fef2f2;border:1px solid #fecaca;color:#dc2626;padding:1rem;border-radius:8px;margin-bottom:1.5rem}.wizard-step[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease}.wizard-step[_ngcontent-%COMP%]   .step-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#1f2937;margin:0 0 .5rem}.wizard-step[_ngcontent-%COMP%]   .step-description[_ngcontent-%COMP%]{color:#6b7280;margin:0 0 2rem}.wizard-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.wizard-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:500;color:#374151;margin-bottom:.5rem}.wizard-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]{cursor:pointer}.wizard-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .textarea-input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #d1d5db;border-radius:6px;font-family:inherit;font-size:1rem;resize:vertical}.wizard-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .textarea-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5;box-shadow:0 0 0 3px #4f46e51a}.wizard-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .char-count[_ngcontent-%COMP%]{display:block;text-align:right;color:#9ca3af;font-size:.875rem;margin-top:.25rem}.wizard-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .select-input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #d1d5db;border-radius:6px;font-size:1rem;background:white;cursor:pointer}.wizard-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .select-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5;box-shadow:0 0 0 3px #4f46e51a}.wizard-form[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.wizard-form[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]   .color-input[_ngcontent-%COMP%]{width:60px;height:40px;border:1px solid #d1d5db;border-radius:6px;cursor:pointer}.wizard-form[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]   .color-value[_ngcontent-%COMP%]{font-family:Courier New,monospace;color:#6b7280;font-weight:500}.wizard-form[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.wizard-form[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.wizard-form[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{cursor:pointer}.wizard-form[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#374151}.wizard-form[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;cursor:pointer}.wizard-form[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.wizard-form[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#374151}.business-hours[_ngcontent-%COMP%]   .day-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.75rem 0;border-bottom:1px solid #f3f4f6}.business-hours[_ngcontent-%COMP%]   .day-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.business-hours[_ngcontent-%COMP%]   .day-row[_ngcontent-%COMP%]   .day-name[_ngcontent-%COMP%]{flex:0 0 120px;margin:0}.business-hours[_ngcontent-%COMP%]   .day-row[_ngcontent-%COMP%]   .time-inputs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex:1}.business-hours[_ngcontent-%COMP%]   .day-row[_ngcontent-%COMP%]   .time-inputs[_ngcontent-%COMP%]   .time-input[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #d1d5db;border-radius:6px;font-size:.875rem}.business-hours[_ngcontent-%COMP%]   .day-row[_ngcontent-%COMP%]   .time-inputs[_ngcontent-%COMP%]   .time-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5}.business-hours[_ngcontent-%COMP%]   .day-row[_ngcontent-%COMP%]   .time-inputs[_ngcontent-%COMP%]   .time-separator[_ngcontent-%COMP%]{color:#9ca3af;font-size:.875rem}.preview-section[_ngcontent-%COMP%]{text-align:center;padding:2rem;background:#f9fafb;border-radius:8px;margin-bottom:2rem}.preview-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;color:#374151}.preview-section[_ngcontent-%COMP%]   .preview-widget[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:60px;height:60px;border-radius:50%;margin-bottom:1rem;box-shadow:0 4px 6px -1px #0000001a}.preview-section[_ngcontent-%COMP%]   .preview-widget[_ngcontent-%COMP%]   .preview-bubble[_ngcontent-%COMP%]{font-size:2rem}.preview-section[_ngcontent-%COMP%]   .preview-message[_ngcontent-%COMP%]{color:#6b7280;font-size:.875rem}.embed-section[_ngcontent-%COMP%]{margin-bottom:2rem}.embed-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;color:#374151}.embed-section[_ngcontent-%COMP%]   .code-block[_ngcontent-%COMP%]{position:relative;background:#1f2937;border-radius:8px;padding:1.5rem;overflow-x:auto}.embed-section[_ngcontent-%COMP%]   .code-block[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0}.embed-section[_ngcontent-%COMP%]   .code-block[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:#e5e7eb;font-size:.875rem;font-family:Courier New,monospace}.embed-section[_ngcontent-%COMP%]   .code-block[_ngcontent-%COMP%]   .copy-button[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;padding:.5rem 1rem;background:#4F46E5;color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:.875rem;transition:background .2s}.embed-section[_ngcontent-%COMP%]   .code-block[_ngcontent-%COMP%]   .copy-button[_ngcontent-%COMP%]:hover{background:#4338ca}.embed-section[_ngcontent-%COMP%]   .code-instructions[_ngcontent-%COMP%]{margin-top:1rem;color:#6b7280;font-size:.875rem}.embed-section[_ngcontent-%COMP%]   .code-instructions[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:#f3f4f6;padding:.25rem .5rem;border-radius:4px;font-family:Courier New,monospace;color:#dc2626}.preview-link-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;color:#374151}.preview-link-section[_ngcontent-%COMP%]   .preview-link[_ngcontent-%COMP%]{display:inline-block;color:#4f46e5;text-decoration:none;padding:.5rem 1rem;background:#eef2ff;border-radius:6px;font-size:.875rem;transition:background .2s}.preview-link-section[_ngcontent-%COMP%]   .preview-link[_ngcontent-%COMP%]:hover{background:#e0e7ff}.wizard-navigation[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:2rem;padding-top:2rem;border-top:1px solid #e5e7eb}.wizard-navigation[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.75rem 2rem;border:none;border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .2s}.wizard-navigation[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.wizard-navigation[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151}.wizard-navigation[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#e5e7eb}.wizard-navigation[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:#4F46E5;color:#fff}.wizard-navigation[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#4338ca}.wizard-navigation[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]{background:#10b981;color:#fff}.wizard-navigation[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background:#059669}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 640px){.wizard-content[_ngcontent-%COMP%]{padding:1.5rem}.wizard-header[_ngcontent-%COMP%]   .wizard-title[_ngcontent-%COMP%]{font-size:1.5rem}.business-hours[_ngcontent-%COMP%]   .day-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.business-hours[_ngcontent-%COMP%]   .day-row[_ngcontent-%COMP%]   .day-name[_ngcontent-%COMP%]{margin-bottom:.5rem}.business-hours[_ngcontent-%COMP%]   .day-row[_ngcontent-%COMP%]   .time-inputs[_ngcontent-%COMP%]{width:100%}}"]})}}return t})(),data:{title:"Configuraci\xf3n Inicial"}},{path:"dashboard",component:(()=>{class t{constructor(n){this.chatService=n,this.stats=null,this.recentConversations=[],this.loading=!0,this.error=null}ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.loading=!0,this.chatService.getStats().subscribe({next:n=>{this.stats=n},error:n=>{console.error("Error loading stats:",n),this.error="Error al cargar estad\xedsticas"}}),this.chatService.getConversations({limit:5}).subscribe({next:n=>{this.recentConversations=n,this.loading=!1},error:n=>{console.error("Error loading conversations:",n),this.error="Error al cargar conversaciones",this.loading=!1}})}getStatusBadgeClass(n){return{open:"badge-success",closed:"badge-gray",pending:"badge-warning"}[n]||"badge-gray"}getStatusLabel(n){return{open:"Abierta",closed:"Cerrada",pending:"Pendiente"}[n]||n}formatDate(n){return new Date(n).toLocaleDateString("es-ES",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})}static{this.\u0275fac=function(s){return new(s||t)(e.rXU(l))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-dashboard"]],decls:12,vars:3,consts:[[1,"dashboard-container"],[1,"dashboard-header"],[1,"header-actions"],["routerLink","../conversations",1,"btn","btn-primary"],["routerLink","../settings",1,"btn","btn-secondary"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","dashboard-content",4,"ngIf"],[1,"loading-state"],[1,"spinner"],[1,"error-state"],[1,"dashboard-content"],["class","stats-grid",4,"ngIf"],["class","status-overview",4,"ngIf"],[1,"recent-conversations"],["class","empty-state",4,"ngIf"],["class","conversations-list",4,"ngIf"],["routerLink","../conversations",1,"view-all-link"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"status-overview"],[1,"status-grid"],[1,"status-item"],[1,"status-bar"],[1,"status-label"],[1,"empty-state"],[1,"conversations-list"],["class","conversation-item",4,"ngFor","ngForOf"],[1,"conversation-item"],[1,"conversation-info"],[1,"conversation-message"],[1,"conversation-meta"],[1,"conversation-time"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"h1"),e.EFF(3,"\u{1f4ac} Dashboard Smart Chat"),e.k0s(),e.j41(4,"div",2)(5,"a",3),e.EFF(6," Ver Conversaciones "),e.k0s(),e.j41(7,"a",4),e.EFF(8," \u2699\ufe0f Configuraci\xf3n "),e.k0s()()(),e.DNE(9,E,4,0,"div",5),e.DNE(10,j,2,1,"div",6),e.DNE(11,I,10,4,"div",7),e.k0s()),2&s&&(e.R7$(9),e.Y8G("ngIf",o.loading),e.R7$(1),e.Y8G("ngIf",o.error&&!o.loading),e.R7$(1),e.Y8G("ngIf",!o.loading&&!o.error))},dependencies:[a.Sq,a.bT,g.Wk],styles:[".dashboard-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem 1rem}.dashboard-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1f2937;margin:0}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:1rem}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;font-weight:500;text-decoration:none;cursor:pointer;transition:all .2s}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:#4F46E5;color:#fff}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover{background:#4338ca}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb}.loading-state[_ngcontent-%COMP%], .error-state[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#6b7280}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;margin:0 auto 1rem;border:4px solid #e5e7eb;border-top-color:#4f46e5;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin-bottom:2rem}.stat-card[_ngcontent-%COMP%]{display:flex;gap:1rem;background:white;padding:1.5rem;border-radius:12px;box-shadow:0 1px 3px #0000001a}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:2.5rem}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1f2937;margin:0 0 .25rem}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;margin:0}.status-overview[_ngcontent-%COMP%]{background:white;padding:1.5rem;border-radius:12px;box-shadow:0 1px 3px #0000001a;margin-bottom:2rem}.status-overview[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1f2937;margin:0 0 1rem}.status-overview[_ngcontent-%COMP%]   .status-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.status-overview[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]{height:8px;border-radius:4px;margin-bottom:.5rem;transition:width .3s ease}.status-overview[_ngcontent-%COMP%]   .status-item[_ngcontent-%COMP%]   .status-label[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280}.recent-conversations[_ngcontent-%COMP%]{background:white;padding:1.5rem;border-radius:12px;box-shadow:0 1px 3px #0000001a}.recent-conversations[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1f2937;margin:0 0 1rem}.recent-conversations[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#9ca3af}.recent-conversations[_ngcontent-%COMP%]   .conversations-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.recent-conversations[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#f9fafb;border-radius:8px;transition:background .2s}.recent-conversations[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]:hover{background:#f3f4f6}.recent-conversations[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-info[_ngcontent-%COMP%]{flex:1}.recent-conversations[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#1f2937;margin:0 0 .25rem}.recent-conversations[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-info[_ngcontent-%COMP%]   .conversation-message[_ngcontent-%COMP%]{font-size:.875rem;color:#6b7280;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:300px}.recent-conversations[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-end;gap:.5rem}.recent-conversations[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-meta[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:12px;font-size:.75rem;font-weight:500}.recent-conversations[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-meta[_ngcontent-%COMP%]   .badge.badge-success[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.recent-conversations[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-meta[_ngcontent-%COMP%]   .badge.badge-warning[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.recent-conversations[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-meta[_ngcontent-%COMP%]   .badge.badge-gray[_ngcontent-%COMP%]{background:#e5e7eb;color:#374151}.recent-conversations[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-meta[_ngcontent-%COMP%]   .conversation-time[_ngcontent-%COMP%]{font-size:.75rem;color:#9ca3af}.recent-conversations[_ngcontent-%COMP%]   .view-all-link[_ngcontent-%COMP%]{display:inline-block;margin-top:1rem;color:#4f46e5;text-decoration:none;font-weight:500;font-size:.875rem}.recent-conversations[_ngcontent-%COMP%]   .view-all-link[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 768px){.dashboard-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{width:100%}.dashboard-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}.conversation-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start!important}.conversation-item[_ngcontent-%COMP%]   .conversation-meta[_ngcontent-%COMP%]{flex-direction:row;align-items:center;width:100%;justify-content:space-between}}"]})}}return t})(),data:{title:"Dashboard"}},{path:"conversations",component:(()=>{class t{constructor(n){this.chatService=n,this.conversations=[],this.selectedConversation=null,this.messages=[],this.newMessage="",this.loading=!0,this.sendingMessage=!1}ngOnInit(){this.loadConversations()}loadConversations(){this.loading=!0,this.chatService.getConversations().subscribe({next:n=>{this.conversations=n,this.loading=!1,n.length>0&&!this.selectedConversation&&this.selectConversation(n[0])},error:n=>{console.error("Error loading conversations:",n),this.loading=!1}})}selectConversation(n){this.selectedConversation=n,this.loadMessages(n.id)}loadMessages(n){this.chatService.getConversationMessages(n).subscribe({next:s=>{this.messages=s},error:s=>{console.error("Error loading messages:",s)}})}sendMessage(){if(!this.newMessage.trim()||!this.selectedConversation)return;this.sendingMessage=!0;const n=this.newMessage;this.newMessage="",this.chatService.sendMessage(this.selectedConversation.id,n).subscribe({next:()=>{this.loadMessages(this.selectedConversation.id),this.sendingMessage=!1},error:s=>{console.error("Error sending message:",s),this.newMessage=n,this.sendingMessage=!1}})}formatTime(n){return new Date(n).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}formatDate(n){return new Date(n).toLocaleDateString("es-ES",{day:"2-digit",month:"short"})}static{this.\u0275fac=function(s){return new(s||t)(e.rXU(l))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-conversations"]],decls:14,vars:6,consts:[[1,"conversations-container"],[1,"conversations-sidebar"],[1,"sidebar-header"],[1,"btn-refresh",3,"click"],["class","conversations-list",4,"ngIf"],["class","loading-state",4,"ngIf"],[1,"messages-panel"],["class","panel-header",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","messages-container",4,"ngIf"],["class","message-input",4,"ngIf"],[1,"conversations-list"],["class","conversation-item",3,"active","click",4,"ngFor","ngForOf"],[1,"conversation-item",3,"click"],[1,"conversation-header"],[1,"conversation-time"],[1,"last-message"],["class","unread-badge",4,"ngIf"],[1,"unread-badge"],[1,"loading-state"],[1,"spinner"],[1,"panel-header"],[1,"status-badge"],[1,"empty-state"],[1,"messages-container"],["class","message",3,"message-agent","message-user",4,"ngFor","ngForOf"],[1,"message"],[1,"message-bubble"],[1,"message-time"],[1,"message-input"],["type","text","placeholder","Escribe un mensaje...",3,"ngModel","disabled","ngModelChange","keyup.enter"],[1,"btn-send",3,"disabled","click"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e.EFF(4,"\u{1f4ac} Conversaciones"),e.k0s(),e.j41(5,"button",3),e.bIt("click",function(){return o.loadConversations()}),e.EFF(6,"\u{1f504}"),e.k0s()(),e.DNE(7,Y,2,1,"div",4),e.DNE(8,A,2,0,"div",5),e.k0s(),e.j41(9,"div",6),e.DNE(10,X,5,2,"div",7),e.DNE(11,V,3,0,"div",8),e.DNE(12,J,2,1,"div",9),e.DNE(13,B,4,4,"div",10),e.k0s()()),2&s&&(e.R7$(7),e.Y8G("ngIf",!o.loading),e.R7$(1),e.Y8G("ngIf",o.loading),e.R7$(2),e.Y8G("ngIf",o.selectedConversation),e.R7$(1),e.Y8G("ngIf",!o.selectedConversation),e.R7$(1),e.Y8G("ngIf",o.selectedConversation),e.R7$(1),e.Y8G("ngIf",o.selectedConversation))},dependencies:[a.Sq,a.bT,i.me,i.BC,i.vS],styles:[".conversations-container[_ngcontent-%COMP%]{display:flex;height:calc(100vh - 120px);max-width:1400px;margin:0 auto;padding:1rem;gap:1rem}.conversations-sidebar[_ngcontent-%COMP%]{width:350px;background:white;border-radius:12px;box-shadow:0 1px 3px #0000001a;display:flex;flex-direction:column}.conversations-sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid #e5e7eb}.conversations-sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:#1f2937}.conversations-sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]{background:none;border:none;font-size:1.25rem;cursor:pointer;transition:transform .2s}.conversations-sidebar[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]   .btn-refresh[_ngcontent-%COMP%]:hover{transform:rotate(180deg)}.conversations-sidebar[_ngcontent-%COMP%]   .conversations-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.conversations-sidebar[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]{position:relative;padding:1rem 1.5rem;border-bottom:1px solid #f3f4f6;cursor:pointer;transition:background .2s}.conversations-sidebar[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]:hover{background:#f9fafb}.conversations-sidebar[_ngcontent-%COMP%]   .conversation-item.active[_ngcontent-%COMP%]{background:#eef2ff;border-left:3px solid #4F46E5}.conversations-sidebar[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.conversations-sidebar[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:.875rem;font-weight:600;color:#1f2937}.conversations-sidebar[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .conversation-header[_ngcontent-%COMP%]   .conversation-time[_ngcontent-%COMP%]{font-size:.75rem;color:#9ca3af}.conversations-sidebar[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .last-message[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#6b7280;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.conversations-sidebar[_ngcontent-%COMP%]   .conversation-item[_ngcontent-%COMP%]   .unread-badge[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background:#ef4444;color:#fff;border-radius:12px;padding:.125rem .5rem;font-size:.75rem;font-weight:600}.messages-panel[_ngcontent-%COMP%]{flex:1;background:white;border-radius:12px;box-shadow:0 1px 3px #0000001a;display:flex;flex-direction:column}.messages-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid #e5e7eb}.messages-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.125rem;font-weight:600;color:#1f2937}.messages-panel[_ngcontent-%COMP%]   .panel-header[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;background:#d1fae5;color:#065f46;border-radius:12px;font-size:.75rem;font-weight:500;text-transform:capitalize}.messages-panel[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]{flex:1;padding:1.5rem;overflow-y:auto;display:flex;flex-direction:column;gap:1rem}.messages-panel[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{display:flex}.messages-panel[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message.message-agent[_ngcontent-%COMP%]{justify-content:flex-end}.messages-panel[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message.message-agent[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{background:#4F46E5;color:#fff}.messages-panel[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message.message-user[_ngcontent-%COMP%]{justify-content:flex-start}.messages-panel[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message.message-user[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{background:#f3f4f6;color:#1f2937}.messages-panel[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]{max-width:70%;padding:.75rem 1rem;border-radius:12px;word-wrap:break-word}.messages-panel[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:.875rem}.messages-panel[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .message-bubble[_ngcontent-%COMP%]   .message-time[_ngcontent-%COMP%]{font-size:.75rem;opacity:.7}.messages-panel[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:1rem 1.5rem;border-top:1px solid #e5e7eb}.messages-panel[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:.75rem 1rem;border:1px solid #d1d5db;border-radius:8px;font-size:.875rem}.messages-panel[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5}.messages-panel[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background:#f9fafb;cursor:not-allowed}.messages-panel[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#4F46E5;color:#fff;border:none;border-radius:8px;font-size:1.25rem;cursor:pointer;transition:background .2s}.messages-panel[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]:hover:not(:disabled){background:#4338ca}.messages-panel[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]   .btn-send[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.empty-state[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;color:#9ca3af}.loading-state[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #e5e7eb;border-top-color:#4f46e5;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 768px){.conversations-container[_ngcontent-%COMP%]{flex-direction:column}.conversations-sidebar[_ngcontent-%COMP%]{width:100%;max-height:300px}}"]})}}return t})(),data:{title:"Conversaciones"}},{path:"settings",component:(()=>{class t{constructor(n,s){this.fb=n,this.chatService=s,this.agents=[],this.loading=!0,this.saving=!1,this.success=null,this.error=null}ngOnInit(){this.initForms(),this.loadSettings(),this.loadAgents()}initForms(){this.configForm=this.fb.group({widget_color:["#4F46E5",i.k0.required],widget_position:["bottom-right",i.k0.required],welcome_message:["",[i.k0.required,i.k0.maxLength(250)]],auto_response_enabled:[!0],capture_leads:[!0],is_active:[!0]}),this.agentForm=this.fb.group({agent_name:["",i.k0.required],agent_email:["",[i.k0.required,i.k0.email]]})}loadSettings(){this.loading=!0,this.chatService.getConfig().subscribe({next:n=>{this.configForm.patchValue(n),this.loading=!1},error:n=>{console.error("Error loading settings:",n),this.loading=!1}})}loadAgents(){this.chatService.getAgents().subscribe({next:n=>{this.agents=n},error:n=>{console.error("Error loading agents:",n)}})}saveSettings(){this.configForm.invalid||(this.saving=!0,this.error=null,this.success=null,this.chatService.updateConfig(this.configForm.value).subscribe({next:()=>{this.saving=!1,this.success="\u2705 Configuraci\xf3n guardada correctamente",setTimeout(()=>this.success=null,3e3)},error:n=>{console.error("Error saving settings:",n),this.saving=!1,this.error="\u274c Error al guardar configuraci\xf3n"}}))}inviteAgent(){this.agentForm.invalid||this.chatService.inviteAgent(this.agentForm.value).subscribe({next:()=>{this.agentForm.reset(),this.loadAgents(),this.success="\u2705 Agente invitado correctamente",setTimeout(()=>this.success=null,3e3)},error:n=>{console.error("Error inviting agent:",n),this.error="\u274c Error al invitar agente"}})}getStatusLabel(n){return{active:"Activo",inactive:"Inactivo",invited:"Invitado"}[n]||n}static{this.\u0275fac=function(s){return new(s||t)(e.rXU(i.ok),e.rXU(l))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-settings"]],decls:69,vars:11,consts:[[1,"settings-container"],[1,"settings-header"],["routerLink","../dashboard",1,"btn","btn-secondary"],["class","alert alert-success",4,"ngIf"],["class","alert alert-error",4,"ngIf"],[1,"settings-content"],[1,"settings-section"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","widget_color"],[1,"color-picker-wrapper"],["type","color","id","widget_color","formControlName","widget_color"],[1,"color-value"],[1,"radio-group"],[1,"radio-label"],["type","radio","formControlName","widget_position","value","bottom-right"],["type","radio","formControlName","widget_position","value","bottom-left"],["for","welcome_message"],["id","welcome_message","formControlName","welcome_message","rows","3","maxlength","250"],[1,"form-group","checkbox-group"],[1,"checkbox-label"],["type","checkbox","formControlName","auto_response_enabled"],["type","checkbox","formControlName","capture_leads"],["type","checkbox","formControlName","is_active"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","agents-list",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"invite-agent-form"],[1,"form-row"],["type","text","formControlName","agent_name","placeholder","Nombre del agente",1,"form-input"],["type","email","formControlName","agent_email","placeholder","Email del agente",1,"form-input"],[1,"alert","alert-success"],[1,"alert","alert-error"],[1,"agents-list"],["class","agent-item",4,"ngFor","ngForOf"],[1,"agent-item"],[1,"agent-info"],[1,"agent-status"],[1,"empty-state"]],template:function(s,o){if(1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"h1"),e.EFF(3,"\u2699\ufe0f Configuraci\xf3n"),e.k0s(),e.j41(4,"a",2),e.EFF(5,"\u2190 Volver al Dashboard"),e.k0s()(),e.DNE(6,W,2,1,"div",3),e.DNE(7,q,2,1,"div",4),e.j41(8,"div",5)(9,"div",6)(10,"h2"),e.EFF(11,"\u{1f3a8} Configuraci\xf3n del Widget"),e.k0s(),e.j41(12,"form",7),e.bIt("ngSubmit",function(){return o.saveSettings()}),e.j41(13,"div",8)(14,"label",9),e.EFF(15,"Color Principal"),e.k0s(),e.j41(16,"div",10),e.nrm(17,"input",11),e.j41(18,"span",12),e.EFF(19),e.k0s()()(),e.j41(20,"div",8)(21,"label"),e.EFF(22,"Posici\xf3n"),e.k0s(),e.j41(23,"div",13)(24,"label",14),e.nrm(25,"input",15),e.j41(26,"span"),e.EFF(27,"Abajo Derecha"),e.k0s()(),e.j41(28,"label",14),e.nrm(29,"input",16),e.j41(30,"span"),e.EFF(31,"Abajo Izquierda"),e.k0s()()()(),e.j41(32,"div",8)(33,"label",17),e.EFF(34,"Mensaje de Bienvenida"),e.k0s(),e.nrm(35,"textarea",18),e.j41(36,"small"),e.EFF(37),e.k0s()(),e.j41(38,"div",19)(39,"label",20),e.nrm(40,"input",21),e.j41(41,"span"),e.EFF(42,"Respuestas autom\xe1ticas"),e.k0s()()(),e.j41(43,"div",19)(44,"label",20),e.nrm(45,"input",22),e.j41(46,"span"),e.EFF(47,"Capturar email offline"),e.k0s()()(),e.j41(48,"div",19)(49,"label",20),e.nrm(50,"input",23),e.j41(51,"span"),e.EFF(52,"Widget activo"),e.k0s()()(),e.j41(53,"button",24),e.EFF(54),e.k0s()()(),e.j41(55,"div",6)(56,"h2"),e.EFF(57,"\u{1f465} Gesti\xf3n de Agentes"),e.k0s(),e.DNE(58,Z,2,1,"div",25),e.DNE(59,K,3,0,"div",26),e.j41(60,"div",27)(61,"h3"),e.EFF(62,"\u2709\ufe0f Invitar Nuevo Agente"),e.k0s(),e.j41(63,"form",7),e.bIt("ngSubmit",function(){return o.inviteAgent()}),e.j41(64,"div",28),e.nrm(65,"input",29)(66,"input",30),e.j41(67,"button",24),e.EFF(68," + Invitar "),e.k0s()()()()()()()),2&s){let c,p;e.R7$(6),e.Y8G("ngIf",o.success),e.R7$(1),e.Y8G("ngIf",o.error),e.R7$(5),e.Y8G("formGroup",o.configForm),e.R7$(7),e.JRh(null==(c=o.configForm.get("widget_color"))?null:c.value),e.R7$(18),e.SpI("",(null==(p=o.configForm.get("welcome_message"))||null==p.value?null:p.value.length)||0," / 250"),e.R7$(16),e.Y8G("disabled",o.saving||o.configForm.invalid),e.R7$(1),e.SpI(" ",o.saving?"Guardando...":"\u{1f4be} Guardar Cambios"," "),e.R7$(4),e.Y8G("ngIf",o.agents.length>0),e.R7$(1),e.Y8G("ngIf",0===o.agents.length),e.R7$(4),e.Y8G("formGroup",o.agentForm),e.R7$(4),e.Y8G("disabled",o.agentForm.invalid)}},dependencies:[a.Sq,a.bT,g.Wk,i.qT,i.me,i.Zm,i.Fm,i.BC,i.cb,i.tU,i.j4,i.JD],styles:[".settings-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:2rem 1rem}.settings-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.settings-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1f2937;margin:0}.settings-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;font-weight:500;text-decoration:none;cursor:pointer;transition:all .2s}.settings-header[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151}.settings-header[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:8px;margin-bottom:1.5rem}.alert.alert-success[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.alert.alert-error[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626}.settings-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.settings-section[_ngcontent-%COMP%]{background:white;padding:2rem;border-radius:12px;box-shadow:0 1px 3px #0000001a}.settings-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#1f2937;margin:0 0 1.5rem}.settings-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:500;color:#1f2937;margin:1.5rem 0 1rem}.settings-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.settings-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:500;color:#374151;margin-bottom:.5rem}.settings-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .settings-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .settings-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #d1d5db;border-radius:6px;font-size:1rem}.settings-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .settings-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, .settings-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5;box-shadow:0 0 0 3px #4f46e51a}.settings-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;font-family:inherit}.settings-section[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{display:block;margin-top:.25rem;color:#9ca3af;font-size:.875rem}.settings-section[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.settings-section[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]{width:60px;height:40px;border:1px solid #d1d5db;border-radius:6px;cursor:pointer}.settings-section[_ngcontent-%COMP%]   .color-picker-wrapper[_ngcontent-%COMP%]   .color-value[_ngcontent-%COMP%]{font-family:Courier New,monospace;color:#6b7280;font-weight:500}.settings-section[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.settings-section[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer}.settings-section[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   .radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{cursor:pointer}.settings-section[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;cursor:pointer}.settings-section[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer}.settings-section[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.75rem 2rem;border:none;border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .2s}.settings-section[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:#4F46E5;color:#fff}.settings-section[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#4338ca}.settings-section[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.agents-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-bottom:1.5rem}.agents-list[_ngcontent-%COMP%]   .agent-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#f9fafb;border-radius:8px}.agents-list[_ngcontent-%COMP%]   .agent-item[_ngcontent-%COMP%]   .agent-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .25rem;font-size:1rem;font-weight:500;color:#1f2937}.agents-list[_ngcontent-%COMP%]   .agent-item[_ngcontent-%COMP%]   .agent-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#6b7280}.agents-list[_ngcontent-%COMP%]   .agent-item[_ngcontent-%COMP%]   .agent-status[_ngcontent-%COMP%]{padding:.25rem .75rem;background:#d1fae5;color:#065f46;border-radius:12px;font-size:.75rem;font-weight:500}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#9ca3af}.invite-agent-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:1rem}.invite-agent-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{flex:1;padding:.75rem;border:1px solid #d1d5db;border-radius:6px;font-size:.875rem}.invite-agent-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5}.invite-agent-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{white-space:nowrap}@media (max-width: 768px){.settings-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.invite-agent-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column}}"]})}}return t})(),data:{title:"Configuraci\xf3n"}}];let ee=(()=>{class t{static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[g.iI.forChild(Q),g.iI]})}}return t})(),ne=(()=>{class t{static{this.\u0275fac=function(s){return new(s||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({providers:[l],imports:[a.MD,ee,m.q1,i.YN,i.X1]})}}return t})()}}]);